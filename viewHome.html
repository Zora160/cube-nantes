<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>View home with Sweet Home 3D HTML5 Viewer</title>

<script type="text/javascript" src="lib/big.min.js"></script>
<script type="text/javascript" src="lib/gl-matrix-min.js"></script>
<script type="text/javascript" src="lib/jszip.min.js"></script>
<script type="text/javascript" src="lib/core.min.js"></script>
<script type="text/javascript" src="lib/geom.min.js"></script>
<script type="text/javascript" src="lib/stroke.min.js"></script>
<script type="text/javascript" src="lib/batik-svgpathparser.min.js"></script>
<script type="text/javascript" src="lib/jsXmlSaxParser.min.js"></script>
<script type="text/javascript" src="lib/triangulator.min.js"></script>
<script type="text/javascript" src="lib/viewmodel.min.js"></script>
<script type="text/javascript" src="lib/viewhome.min.js"></script>

<style type="text/css">
/* The class of components handled by the 
 viewer */
.viewerComponent  {
}
/* Styles pour Full Screen et Responsive */
body, html {
  height: 100%;
  width: 100%;
  overflow: hidden; /* Empêche les barres de défilement indésirables */
  margin: 0;
}
#viewerCanvas {
  width: 100%;
  height: 100%;
  display: block; /* Évite les marges invisibles */
}
/* Le positionnement initial des contrôles de navigation (sera écrasé par le CSS plus loin) */
#viewerNavigationDiv {
  position: absolute; 
  bottom: 5px;
  left: 5px;
}

/* Styles pour les boutons - Améliorer la lisibilité et l'adaptabilité */
#viewerNavigationDiv div {
    display: inline-block; /* Aligne les groupes d'input/label */
    margin: 5px;
}
#levelsAndCameras {
    min-width: 150px;
}
</style>
</head>

<body>
   <style>
  #viewerNavigationDiv {
    position: absolute !important;
    z-index: 999999 !important;
    pointer-events: auto !important;
  }
</style>

<div style="height: 100vh; width: 100vw; position: relative;">
  <canvas id="viewerCanvas" class="viewerComponent" 
          style="background-color: #CCCCCC; border: 1px solid gray; outline:none" tabIndex="1"></canvas>
  
  <div id="viewerProgressDiv" style="width: 80%; max-width: 400px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: rgba(128, 128, 128, 0.7); padding: 20px; border-radius: 25px; box-sizing: border-box;">
    <progress id="viewerProgress"  class="viewerComponent" value="0" max="200" style="width: 100%"></progress>
    <label id="viewerProgressLabel" class="viewerComponent" style="margin-top: 2px; display: block; margin-left: 10px; text-align: center; color: white;"></label>
  </div>
  
  <div id="viewerNavigationDiv" style="margin-top: 0; position: absolute; bottom: 5px; left: 5px;">
    
 <input  id="aerialView"   class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;"/>
      <label class="viewerComponent" for="aerialView" style="visibility: hidden;">Aerial view</label>
    <input  id="virtualVisit" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;"/>
      <label class="viewerComponent" for="virtualVisit" style="visibility: hidden;">Virtual visit</label>
    <select id="levelsAndCameras" class="viewerComponent" style="visibility: hidden;"></select>
  </div>
</div>
<div style="position: absolute;
 right: 5px; text-align: center; width: 95%; z-index: -1">
  <a href="http://www.sweethome3d.com">Sweet Home 3D</a> HTML5 Viewer / Version 1.9.1 - Distributed under GNU General Public License
</div>

<script type="text/javascript">
  var homeUrl = "Le%20cube%20Nantes.zip";
  var onerror = function(err) {
      if (err == "No WebGL") {
        alert("Sorry, your browser doesn't support WebGL.");
      } else {
        console.log(err.stack);
        alert("Error: " + 
 (err.message  ? err.constructor.name + " " +  err.message  : err)
              + (window.location.href.indexOf("file://") === 0 ? "\nCheck your browser is allowed to access local files." : ""));
      }
    };
  var onprogression = function(part, info, percentage) {
      var progress = document.getElementById("viewerProgress"); 
      if (part === HomeRecorder.READING_HOME) {
        // Home loading is finished 
        
 progress.value = percentage * 100;
        info = info.substring(info.lastIndexOf('/') + 1);
 } else if (part === Node3D.READING_MODEL) {
        // Models loading is finished 
        progress.value = 100 + percentage * 100;
 if (percentage === 1) {
          document.getElementById("viewerProgressDiv").style.visibility = "hidden";
 }
      }
    
      document.getElementById("viewerProgressLabel").innerHTML = 
          (percentage ? Math.floor(percentage * 100) + "% " : "") + part + " " + info;
 };
   
  // Display home in canvas 3D
  // Mouse and keyboard navigation explained at 
  // http://sweethome3d.cvs.sf.net/viewvc/sweethome3d/SweetHome3D/src/com/eteks/sweethome3d/viewcontroller/resources/help/en/editing3DView.html
  // You may also switch between aerial view and virtual visit with the space bar
  // For browser compatibility, see http://caniuse.com/webgl
  viewHome("viewerCanvas",    // Id of the canvas
           homeUrl,           // URL or relative URL of the home to display 
           onerror,      
           // Callback called in case of error
           onprogression,     // Callback called while loading 
          {roundsPerMinute: 0,                    // Rotation speed of the animation launched once home is loaded in rounds per minute, no animation if missing or equal to 0 
           navigationPanel: "none",  
               // Displayed navigation arrows, "none" or "default" for default one or an HTML string containing elements with data-simulated-key 
                                                  // attribute set "UP", "DOWN", "LEFT", "RIGHT"... to replace the default navigation panel, "none" if missing 
   
           aerialViewButtonId: "aerialView",      // Id of the aerial view radio button, radio buttons hidden if missing  
           virtualVisitButtonId: "virtualVisit",  // Id of the aerial view radio button, radio buttons hidden if missing  
           levelsAndCamerasListId: "levelsAndCameras",          // Id of the levels and cameras select component, hidden if missing
        /* level: 
 "Roof", */                                    // Uncomment to select the displayed level, default level if missing */
        /* selectableLevels: ["Ground floor", "Roof"], */       // Uncomment to choose the list of displayed levels, no select component if empty array */
        /* camera: "Exterior view", */     
                      // Uncomment to select a camera, default camera if missing */
        /* selectableCameras: ["Exterior view", "Kitchen"], */  // Uncomment to choose the list of displayed cameras, no camera if missing */
           activateCameraSwitchKey: true                        // Switch between top view 
 / virtual visit with space bar if not false or missing */
          });
 </script>
<div id="viewerProgressDiv">
<progress id="viewerProgress" class="viewerComponent" value="0" max="200" style="width:100%"></progress>
<label id="viewerProgressLabel" class="viewerComponent"></label>
</div>


<div id="viewerNavigationDiv">
<div>
<input id="aerialView" class="viewerComponent" name="cameraType" type="radio" />
<label for="aerialView">Vue aérienne</label>
</div>


<div>
<input id="virtualVisit" class="viewerComponent" name="cameraType" type="radio" />
<label for="virtualVisit">Visite virtuelle</label>
</div>


<select id="levelsAndCameras" class="viewerComponent"></select>
</div>


<script>
var homeUrl = "Le%20cube%20Nantes.zip";
 var onerror = function(err) {
if (err == "No WebGL") {
alert("Votre navigateur ne supporte pas WebGL.");
} else {
console.log(err.stack);
 alert("Erreur: " + (err.message ? err.constructor.name + " " + err.message : err));
}
};
 var onprogression = function(part, info, percentage) {
var progress = document.getElementById("viewerProgress");


if (part === HomeRecorder.READING_HOME) {
progress.value = percentage * 100;
 info = info.substring(info.lastIndexOf('/') + 1);
} else if (part === Node3D.READING_MODEL) {
progress.value = 100 + percentage * 100;
 if (percentage === 1) {
document.getElementById("viewerProgressDiv").style.visibility = "hidden";
}
}


document.getElementById("viewerProgressLabel").innerHTML =
(percentage ? Math.floor(percentage * 100) + "% " : "") + part + " " + info;
 };


viewHome(
"viewerCanvas",
homeUrl,
onerror,
onprogression,
{
roundsPerMinute: 0,
navigationPanel: "none",
aerialViewButtonId: "aerialView",
virtualVisitButtonId: "virtualVisit",
levelsAndCamerasListId: "levelsAndCameras",
activateCameraSwitchKey: true
}
);
</script>

<style>
/* 1. Positionnement global des boutons de navigation en haut à droite */
#viewerNavigationDiv {
  position: absolute !important;
  top: 10px !important; /* Marge du haut */
  right: 10px !important; /* Marge de droite */
  left: auto !important; /* Annuler l'ancien left: 5px */
  bottom: auto !important; /* Annuler l'ancien bottom: 5px */
  background-color: rgba(255, 255, 255, 0.8); /* Fond pour la lisibilité */
  padding: 5px;
  border-radius: 5px;
  display: flex; /* Utiliser Flexbox pour aligner les éléments */
  flex-direction: row; /* Aligner les éléments horizontalement par défaut */
  align-items: center;
  z-index: 100; /* Assurez-vous qu'ils sont au-dessus du canvas */
}

/* 2. Adaptation pour les petits écrans (Mobiles) */
@media (max-width: 768px) {
  #viewerNavigationDiv {
    /* Mettre les boutons les uns sous les autres sur mobile */
    flex-direction: column; 
    align-items: stretch; /* Étirer les boutons/select sur la largeur */
    
    /* Positionner en bas pour ne pas masquer le centre de la vue */
    top: auto !important; 
    bottom: 0px !important; 
    right: 0px !important;
    left: 0px !important;
    width: 100%;
    padding: 10px 0;
    background-color: rgba(255, 255, 255, 0.95);
  }
  
  #viewerNavigationDiv div, #viewerNavigationDiv select {
      width: 90%; /* Occuper une bonne partie de la largeur */
      margin: 5px auto;
  }
}

/* 3. Style visuel des boutons pour les rendre plus clairs */
#viewerNavigationDiv label, #viewerNavigationDiv select {
    padding: 8px 12px;
    border: 1px solid #ccc;
    border-radius: 4px;
    cursor: pointer;
    background-color: #f9f9f9;
    font-size: 14px;
    display: inline-block; /* Pour les labels */
}

#viewerNavigationDiv input[type="radio"]:checked + label {
    background-color: #007bff;
    color: white;
    border-color: #007bff;
}

/* Cacher les inputs radio pour ne laisser que le label stylisé */
#viewerNavigationDiv input[type="radio"] {
    position: absolute;
    opacity: 0;
}
</style>
</body>
</html>
